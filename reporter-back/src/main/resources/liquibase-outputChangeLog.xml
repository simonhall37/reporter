<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <changeSet author="Simon (generated)" id="1543175888717-1">
        <createSequence sequenceName="hibernate_sequence"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-2">
        <createTable tableName="col_combine">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="col_name" type="VARCHAR(255)"/>
            <column name="col_num" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="column_type" type="VARCHAR(255)"/>
            <column name="key" type="BOOL">
                <constraints nullable="false"/>
            </column>
            <column name="output_type" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-3">
        <createTable tableName="col_lookup">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="col_name" type="VARCHAR(255)"/>
            <column name="col_num" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="column_type" type="VARCHAR(255)"/>
            <column name="key" type="BOOL">
                <constraints nullable="false"/>
            </column>
            <column name="output_type" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-4">
        <createTable tableName="col_metadata">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-5">
        <createTable tableName="col_metadata_columns">
            <column name="column_metadata_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="columns_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-6">
        <createTable tableName="col_simple">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="col_name" type="VARCHAR(255)"/>
            <column name="col_num" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="column_type" type="VARCHAR(255)"/>
            <column name="key" type="BOOL">
                <constraints nullable="false"/>
            </column>
            <column name="output_type" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-7">
        <createTable tableName="col_weeknum">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="col_name" type="VARCHAR(255)"/>
            <column name="col_num" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="column_type" type="VARCHAR(255)"/>
            <column name="key" type="BOOL">
                <constraints nullable="false"/>
            </column>
            <column name="output_type" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-8">
        <createTable tableName="column_def_inputs">
            <column name="column_definition_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="inputs_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-9">
        <createTable tableName="filter_contains">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-10">
        <createTable tableName="filter_def_inputs">
            <column name="filter_definition_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="inputs_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-11">
        <createTable tableName="filter_metadata">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-12">
        <createTable tableName="filter_metadata_filters">
            <column name="filter_metadata_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="filters_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-13">
        <createTable tableName="filter_numeric">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-14">
        <createTable tableName="lookup_pairs">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="key" type="VARCHAR(255)"/>
            <column name="value" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-15">
        <createTable tableName="lookups">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-16">
        <createTable tableName="lookups_values">
            <column name="lookup_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="values_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-17">
        <createTable tableName="metadata_pairs">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="key" type="VARCHAR(255)"/>
            <column name="value" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-18">
        <createTable tableName="report_metadata">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="data_source" type="VARCHAR(255)"/>
            <column name="reduction_type" type="INT"/>
            <column name="report_name" type="VARCHAR(255)"/>
            <column name="cols_id" type="BIGINT"/>
            <column name="filter_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-19">
        <createTable tableName="user_profile">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="apikey" type="VARCHAR(255)"/>
            <column name="enabled" type="BOOL">
                <constraints nullable="false"/>
            </column>
            <column name="password" type="VARCHAR(255)"/>
            <column name="username" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-20">
        <addPrimaryKey columnNames="id" constraintName="col_combine_pkey" tableName="col_combine"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-21">
        <addPrimaryKey columnNames="id" constraintName="col_lookup_pkey" tableName="col_lookup"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-22">
        <addPrimaryKey columnNames="column_metadata_id, columns_id" constraintName="col_metadata_columns_pkey" tableName="col_metadata_columns"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-23">
        <addPrimaryKey columnNames="id" constraintName="col_metadata_pkey" tableName="col_metadata"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-24">
        <addPrimaryKey columnNames="id" constraintName="col_simple_pkey" tableName="col_simple"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-25">
        <addPrimaryKey columnNames="id" constraintName="col_weeknum_pkey" tableName="col_weeknum"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-26">
        <addPrimaryKey columnNames="column_definition_id, inputs_id" constraintName="column_def_inputs_pkey" tableName="column_def_inputs"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-27">
        <addPrimaryKey columnNames="id" constraintName="filter_contains_pkey" tableName="filter_contains"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-28">
        <addPrimaryKey columnNames="filter_definition_id, inputs_id" constraintName="filter_def_inputs_pkey" tableName="filter_def_inputs"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-29">
        <addPrimaryKey columnNames="filter_metadata_id, filters_id" constraintName="filter_metadata_filters_pkey" tableName="filter_metadata_filters"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-30">
        <addPrimaryKey columnNames="id" constraintName="filter_metadata_pkey" tableName="filter_metadata"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-31">
        <addPrimaryKey columnNames="id" constraintName="filter_numeric_pkey" tableName="filter_numeric"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-32">
        <addPrimaryKey columnNames="id" constraintName="lookup_pairs_pkey" tableName="lookup_pairs"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-33">
        <addPrimaryKey columnNames="id" constraintName="lookups_pkey" tableName="lookups"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-34">
        <addPrimaryKey columnNames="lookup_id, values_id" constraintName="lookups_values_pkey" tableName="lookups_values"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-35">
        <addPrimaryKey columnNames="id" constraintName="metadata_pairs_pkey" tableName="metadata_pairs"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-36">
        <addPrimaryKey columnNames="id" constraintName="report_metadata_pkey" tableName="report_metadata"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-37">
        <addPrimaryKey columnNames="id" constraintName="user_profile_pkey" tableName="user_profile"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-38">
        <addUniqueConstraint columnNames="filters_id" constraintName="uk_5jn1h4wrviiy93s82op47uiwy" tableName="filter_metadata_filters"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-39">
        <addUniqueConstraint columnNames="inputs_id" constraintName="uk_a0ujj1jxjobi8hhkgnh556ohn" tableName="filter_def_inputs"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-40">
        <addUniqueConstraint columnNames="columns_id" constraintName="uk_kfmyfg3tvt31s6vfgn7cq138x" tableName="col_metadata_columns"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-41">
        <addUniqueConstraint columnNames="values_id" constraintName="uk_p946jckdwkbdb65j5usxr6mj2" tableName="lookups_values"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-42">
        <addUniqueConstraint columnNames="inputs_id" constraintName="uk_tanhdlfbmd4aa3tp0k0xjufxv" tableName="column_def_inputs"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-43">
        <addForeignKeyConstraint baseColumnNames="filter_metadata_id" baseTableName="filter_metadata_filters" constraintName="fk1coum5ug38lv048lkexc21vg2" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="filter_metadata"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-44">
        <addForeignKeyConstraint baseColumnNames="lookup_id" baseTableName="lookups_values" constraintName="fk66xfy5m1etsvdbsqtq1l8dk9i" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="lookups"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-45">
        <addForeignKeyConstraint baseColumnNames="filter_id" baseTableName="report_metadata" constraintName="fk99n2k3cu7ejgu606nab5rne6a" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="filter_metadata"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-46">
        <addForeignKeyConstraint baseColumnNames="cols_id" baseTableName="report_metadata" constraintName="fkbweo5r5426a1q09v81qkou5ij" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="col_metadata"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-47">
        <addForeignKeyConstraint baseColumnNames="values_id" baseTableName="lookups_values" constraintName="fkdr6hbvjl3ihvhks3lw87ebo9n" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="lookup_pairs"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-48">
        <addForeignKeyConstraint baseColumnNames="inputs_id" baseTableName="column_def_inputs" constraintName="fkh2dh2gaym352d3hg8hqclm7dv" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="metadata_pairs"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-49">
        <addForeignKeyConstraint baseColumnNames="inputs_id" baseTableName="filter_def_inputs" constraintName="fkl2vm9pm4rapg2n2si1rv8dk33" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="metadata_pairs"/>
    </changeSet>
    <changeSet author="Simon (generated)" id="1543175888717-50">
        <addForeignKeyConstraint baseColumnNames="column_metadata_id" baseTableName="col_metadata_columns" constraintName="fkoqrbdsu11px2ph4qvt1uscx1k" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="col_metadata"/>
    </changeSet>
    <changeSet author="Simon" id="user-insert">
	    <insert tableName="user_profile">
	        <column name="id" value="1"/>
	        <column name="username" value="admin"/>
	        <column name="password" value="$2a$11$s1LayP.Oqb0srgx.bWBBoO8EjSBiMtCaozx.iJHRhfYprjdJdu4/i"/>
	        <column name="apikey" value="update in gui"/>
	        <column name="enabled" value="t"/>
	    </insert>
	</changeSet>
</databaseChangeLog>
